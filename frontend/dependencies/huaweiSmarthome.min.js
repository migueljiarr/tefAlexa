"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol?"symbol":typeof e};(function(e,t){"use strict";if(typeof define==="function"&&define.amd){define(["wolfy87-eventemitter"],function(){return e.HuaweiSmarthome=t()})}else if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object"){var n=require("wolfy87-eventemitter");module.exports=t(new n)}else{var i=new Error("Couldn't resolve dependency 'EventEmitter'. Please see https://github.com/Olical/EventEmitter");var r={};if(e.EventEmitter){r=new e.EventEmitter}else{console.warn(i)}e.HuaweiSmarthome=t(r)}})(window,function(e){"use strict";var t="v2";var n="/userApp/";var i="v1.1.0";var r="https://www.huaweiioe.com";var o="/api";var s=o+"/auth";var a=o+"/accessToken";var A=o+"/bind";var d=o+"/syncDevice";var c=o+"/syncData";var v=o+"/unbind";var u="https://62.14.234.69:8443";var h=n+i+"/enduser/token";var f=n+i+"/enduser/deletetoken";var l=n+i+"/enduser/register";var g=n+i+"/homes";var m=n+i+"/homes/";var y="/rooms";var E=n+i+"/homes/";var p="/latestDevice";var b=n+i+"/homes/";var C="/deviceCapabilities";var w=n+i+"/homes/";var T="/devices/verifycode";var I=n+i+"/devices";var Q=n+i+"/devices/";var B=["homeId","roomId"];var O=n+i+"/homes/";var R="/devices/";var x=n+i+"/devices/";var S="/services/";var L="/command";var N=n+i+"/homes/";var P="/recordingEvents";var z="Access token error.";var H="Sign in failed.";var F="Sign out failed.";var D="Couldn't get existing 'Homes'.";var U="Couldn't get 'Rooms' in current home.";var k="Couldn't get device in current room.";var G="Couldn't get device details for ";var X="Button exist.";var V="This button does absolutely nothing.";var W="Logged out by remote. Current user signed in from a different client";var j={logOnEvent:"log-on",logOnErrorEvent:"log-on-error",tokenErrorEvent:"token-error",tokenReadyEvent:"token-ready",unauthorized:"unauthorized-request",methodNotAllowed:"method-not-allowed",unknownError:"unknown-error",logOffEvent:"log-off",logOffErrorEvent:"log-off-error",signUpAttemptEvent:"sign-up-tried",signedUpEvent:"sign-up-ed",signUpFailedEvent:"sign-up-failed",signUpErrorEvent:"sign-up-error",clientReadyEvent:"client-ready",homeFoundEvent:"home-found",homeReadyEvent:"home-ready",getHomeErrorEvent:"get-home-error",roomFoundEvent:"room-found",roomReadyEvent:"room-ready",getRoomErrorEvent:"get-room-error",gatewayBindCmdSentEvent:"gateway-bind-command-sent",gatewayFoundEvent:"gateway-found",gatewayResolveFailedEvent:"gateway-resolve-failed",gatewayReadyEvent:"gateway-ready",virtualGatewayFoundEvent:"virtual-gateway-found",virtualGatewayReadyEvent:"virtual-gateway-ready",virtualGatewayDiscoveryEvent:"virtual-gateway-discovery",virtualGatewaySyncDataEvent:"virtual-gateway-sync-data",virtualGatewayDeletedEvent:"virtual-gateway-deleted",deviceCapabilityFoundEvent:"device-cap-found",deviceFoundEvent:"device-found",allDeviceReadyEvent:"all-device-ready",deviceAvailableEvent:"device-available",availableDeviceReadyEvent:"avail-device-ready",deviceReadyEvent:"device-ready",deviceActivatedEvent:"device-online",deviceDeactivatedEvent:"device-offline",deviceOnlineEvent:"device-online",deviceOfflineEvent:"device-offline",getDeviceDetailsErrorEvent:"get-device-error",getDeviceErrorEvent:"get-device-error",recordingsFoundEvent:"recordings-found",getRecordingsErrorEvent:"get-recording-error",deviceAddButtonErrorEvent:"add-button-error",deviceCommandSentEvent:"command-sent",notificationSubscribeSucceedEvent:"notification-sub-succeed",notificationSubscribeFailedEvent:"notification-sub-failed",notificationUnsubscribeSucceedEvent:"notification-unsub-succeed",notificationUnsubscribeFailedEvent:"notification-unsub-failed",notificationChannelOpening:"notification-channel-opening",notificationChannelOpened:"notification-channel-opened",notificationChannelClosing:"notification-channel-closing",notificationChannelClosed:"notification-channel-closed",notificationArrivedEvent:"notification-is-here"};var q={bindDevice:"gateway-bound",deviceAdded:"device-added",deviceDeleted:"device-deleted",deviceInfoChanged:"device-info-changed",deviceDataChanged:"device-data-changed",messageConfirm:"message-confirm",commandRsp:"command-respond",clientIdInvalid:"client-id-invalid",userDeleted:"user-deleted",userUpdated:"user-updated",ruleCreated:"rule-created",ruleDeleted:"rule-deleted",ruleUpdated:"rule-updated",ruleStatusChanged:"rule-status-changed",ruleBatch:"rule-batch",ruleExecuted:"rule-executed",bundleVersionUpgradeNotify:"bundle-version-upgrade-notify",bundleVersionUpgradeResult:"bundle-version-upgrade-result",bundlePackageDeleteNotify:"bundle-package-delete-notify",gatewayRebootNotify:"gateway-reboot-notify",gatewayRebootResult:"gateway-reboot-result",gatewayResetNotify:"gateway-reset-notify",gatewayResetResult:"gateway-reset-result",sensorVersionUpgradeNotify:"sensor-version-upgrade-notify",sensorVersionUpgradeResult:"sensor-version-upgrade-result",dmCfgUpgrade:"dm-config-upgrade",replyToTopic:"reply-to-topic"};var M={accessToken:"access_token",tokenType:"token_type",expiresIn:"expires_in",refreshToken:"refresh_token",firstLogin:"first_login",mqttClientid:"mqtt_clientid"};var J={deviceId:"deviceId",serviceId:"serviceId",body:{},header:{callbackURL:"callbackURL",from:"from",to:"to",toType:"toType",method:"method",mode:"mode",requestId:"requestId"}};var Z={deviceId:"deviceId",serviceId:"serviceId",body:{},callbackURL:"callbackURL",from:"from",to:"to",toType:"toType",method:"method",mode:"mode",requestId:"requestId"};var K=true;var Y=false;var _=false;var $=function zt(){It(this,"name",Qt("huawei-smarthome"));It(this,"version",Qt("0.0.1"));It(this,"description",Qt("JavaScript package for hw NA Smart Home web application development"));It(this,"repository",Qt("empty"));It(this,"welcomeMsg",Qt("'Allo' from "+this.name+"!"))};$.prototype.sayHello=function(){return this.welcomeMsg};$.prototype.getTimestampFormatted=st;$.prototype.getUUID=at;$.prototype.Client=function(e,t){return new ee(e,t)};if(window&&window.self===window){$.prototype.outputIpCameraViewToElement=At}if(!e){ee.prototype=Ct(bt)}ee.prototype=Ct(e);ee.prototype.constructor=ee;ee.prototype.signInWithCredentials=ne;ee.prototype.signOut=ie;ee.prototype.userSignUp=re;ee.prototype.Device=function(e,t){return new De(e,t)};ee.prototype.subscribePushNotification=$e;ee.prototype.getRecordingsByHomeId=He;ee.prototype.downloadRecordingByUrl=Fe;ee.prototype.syncVirtualGatewayData=ye;function ee(e,t){var n=this;if(t&&t.INFO_LOG_ON){K=t.INFO_LOG_ON}if(t&&t.DEBUG_LOG_ON){Y=t.DEBUG_LOG_ON}if(t&&t.SHOW_HEARTBEAT){_=t.SHOW_HEARTBEAT}if(t&&t.NA_SERVER_HOST&&t.NA_SERVER_PORT){u="https://"+t.NA_SERVER_HOST+":"+t.NA_SERVER_PORT}if(t&&t.IS_SERVER_HOST){r="https://"+t.IS_SERVER_HOST+":"+(t.IS_SERVER_PORT==null?"443":t.IS_SERVER_PORT)}this.name=e||"huawei-smarthome-client";this.description="Client interacts with Huawei Smarthome NA server";this.event={};for(var i in j){It(this.event,i,{enumerable:true,writable:false,configurable:false,value:j[i]})}this.notification={};for(var o in q){It(this.notification,o,{enumerable:true,writable:false,configurable:false,value:q[o]})}this._gatewayBound=false;this.addListeners(j.signUpAttemptEvent,[oe]);this.addListeners(j.logOnEvent,[ce]);this.addListeners(j.tokenReadyEvent,[ae]);this.addListeners(j.homeFoundEvent,[ve]);this.addListeners(j.homeReadyEvent,[we,he]);this.addListeners(j.deviceCapabilityFoundEvent,[Ne]);this.addListeners(j.gatewayBindCmdSentEvent,[function(e){Ot(n.name+" is trying to bind new gateway");var t=null;var i=n;try{t=JSON.parse(e)}catch(r){console.error(r)}if(t.error_code){xt("Gateway binding error: "+e)}else{(function(){var n=Lt("setTimeout");var r=n(function(){Se.bind(i)(i.homes[0].id,t.deviceId);i.trigger(j.gatewayResolveFailedEvent);console.log("Should delete device from NA.")},t.timeout*1e3);var o=yt(Se.bind(i,i.homes[0].id,t.deviceId))-1;i.once(j.gatewayReadyEvent,function(){Lt("clearTimeout")(r);pt(o);console.log("Cancel delete device from NA.")});Ot("Gateway bind command response: "+e+". Shall proceed")})()}}]);this.addListeners(j.gatewayFoundEvent,[pe]);this.addListeners(j.virtualGatewayFoundEvent,[Ee]);this.addListeners(j.virtualGatewayDiscoveryEvent,[function(e){Ot("Gateway discovery command response: "+e)}]);this.addListeners(j.gatewayReadyEvent,[function(e){Ot("Gateway "+e+" bound..")}]);this.addListeners(j.roomFoundEvent,[Te]);this.addListeners(j.roomReadyEvent,[Ie]);this.addListeners(j.deviceFoundEvent,[Oe]);this.on(j.deviceAvailableEvent,Re);this.on(j.deviceReadyEvent,ze);this.on(j.notificationArrivedEvent,rt);this.on(q.bindDevice,Ce);this.on(q.clientIdInvalid,se);ee.prototype.getDeviceDetails=xe.bind(this);ee.prototype.getDeviceCapabilities=Le.bind(this)}function te(){Ot("Really strange 403 debugging test method running");var e={Please:"let it pass!"};e.naVersion=t;var n={url:"https://192.168.10.102:8443/test",method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},successEvent:j.allDeviceReadyEvent,successEventTarget:this,data:e};Pt(n)}function ne(e){Ot("Signing in client '"+this.name+"' to NA Server");if(!e){if(this.getListeners(j.logOnErrorEvent)){this.trigger(j.logOnErrorEvent,new Error(H))}else{console.error(H)}return this}var n=e;n.naVersion=t;var i={url:u+h,method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},successEvent:j.logOnEvent,successEventTarget:this,data:n};Pt(i);return this}function ie(e){Ot("Signing off client '"+this.name+"' from NA Server");if(!e){if(this.getListeners(j.logOffErrorEvent)){this.trigger(j.logOffErrorEvent,new Error(z))}else{console.error(z)}return}var t="Bearer "+e;var n={url:u+f,method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:t},successEvent:j.logOffEvent,successEventTarget:this};Pt(n);return this}function re(e){Ot("Signing in client '"+this.name+"' to NA Server");if(!e){if(this.getListeners(j.logOnErrorEvent)){this.trigger(j.logOnErrorEvent,new Error(H))}else{console.error(H)}return this}var t=e;var n={url:u+l,method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},successEvent:j.signUpAttemptEvent,successEventTarget:this,data:t};Pt(n)}function oe(e){var t=null;if(!e.length){this.trigger(j.signedUpEvent,["Welcome!"])}else{try{t=JSON.parse(e)}catch(n){xt(e);this.trigger(j.signUpErrorEvent,[e])}if(t){Ot(e)}this.trigger(j.signUpFailedEvent,[e])}}function se(e){if(e.header&&e.header.notifyType==="clientIdInvalid"&&e.body&&e.body.mqttClientId===client.mqtt_clientid){this.wsConnection.shutUp();this.wsConnection.close();Bt(W);St(W);this.trigger(j.logOffEvent,[W])}else{Bt("It does not smell right, check this out: "+e)}}function ae(e){var t=this[M.accessToken];Ot("Fetching homes for "+this.name);if(!t){if(this.getListeners(j.getHomeErrorEvent)){this.trigger(j.getHomeErrorEvent,new Error(D))}else{console.error(D)}return}var n="Bearer "+t;var i={url:u+g,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:n},successEvent:j.homeFoundEvent,successEventTarget:this};Pt(i)}function Ae(){Ot("")}function de(){Ot(this.name+" is trying to connect to NA via WebSocket")}function ce(e){var t=JSON.parse(e);Ot("Parsing token response for "+this.name);for(var n in M){this[M[n]]=t[M[n]]}this.trigger(j.tokenReadyEvent)}function ve(e){Ot("Mounting homes for "+this.name);var t=JSON.parse(e);if(Array.isArray(t)){this.homes=t}else{this.trigger(j.getHomeErrorEvent,e);return}ee.prototype.bindGateway=Nt(fe,this);this.trigger(j.homeReadyEvent)}function ue(e){Ot("Fetching Gateway Info for "+this.name);var t=this.access_token;var n="Bearer "+t;for(var i in this.homes){var r={url:u+E+this.homes[i].id+p,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:n},specialFlag:this.homes[i].id,successEvent:j.deviceFoundEvent,successEventTarget:this};Pt(r)}}function he(e){var t=this.access_token;if(!t){if(this.getListeners(j.getDeviceErrorEvent)){this.trigger(j.getDeviceErrorEvent,new Error(z))}else{console.error(z)}return}var n="Bearer "+t;var i=u+I+"?";for(var r in this.homes){Ot("Resolving gateway for home "+this.homes[r].id);var o={url:i+"homeId="+this.homes[r].id,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:n},specialFlag:this.homes[r],successHandler:Nt(s,this),errorHandler:Nt(s,this)};Pt(o)}function s(e){var t=null;try{t=JSON.parse(e)}catch(n){xt(JSON.stringify(n)+" Response text: "+e)}for(var i in t){if("GATEWAY"===t[i].nodeType){this.trigger(j.gatewayFoundEvent,[t[i]])}}if(!this.gateways){this.trigger(j.gatewayResolveFailedEvent)}}}function fe(e,t,n){var i=le.bind(this);if(null==e&&null==t){if(lt()){var o;(function(){o=document.createElement("iframe");o.setAttribute("id","authIframe");o.setAttribute("src",r+s);o.setAttribute("style","position: absolute;"+"z-index: 9999;"+"margin: auto;"+"top: 0;"+"right: 0;"+"bottom: 0;"+"left: 0;"+"width: 80%;"+"height: 80%;"+"max-width: 450px;"+"max-height: 700px;"+"min-width: 300px;"+"min-height: 300px;"+"box-shadow: 0px 0px 3px 3px rgba(127,127,127,0.75);"+"background-color:rgb(255,255,255);");document.body.insertBefore(o,document.body.firstChild);var e=document.createElement("span");e.textContent="CLOSE";e.setAttribute("id","close-tiny");e.setAttribute("style","position: absolute;"+"z-index: 99999;"+"margin: auto;"+"top: auto;"+"right: 0;"+"bottom: 2em;"+"left: 0;"+"width: 100%;"+"font-size: 2em;"+"text-align: center;"+"cursor: pointer;");e.onclick=function(){gt(o);gt(e)};document.body.insertBefore(e,document.body.firstChild)})()}else{console.warn("NOT a browser. Don't know what to do :(")}}else if(typeof e==="string"&&typeof t==="boolean"&&t==true){console.info("Bind to NA.");fe.call(this,e,n);this.once(j.gatewayBindCmdSentEvent,function(t){console.log("gatewayBindCmdSentEvent response body: "+t);console.info("Then bind to IS.");i.call(this,e)})}else{var a=t;var A={registryType:1,data:e,pin:e,timeout:120};var d="Bearer "+this.access_token;var c=A;var v={url:u+w+a+T,method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:d},successEvent:j.gatewayBindCmdSentEvent,successEventTarget:this,data:c};Pt(v)}}function le(e){if(e){var t={url:r+A,method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},successEvent:null,successEventTarget:null,data:{mac:e}};Pt(t)}}function ge(e){if(e){var t={url:r+v,method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},successEvent:j.virtualGatewayDeletedEvent,successEventTarget:this,data:{gatewayId:e}};Pt(t)}}function me(e){if(e){var t={url:r+d,method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},successEvent:j.virtualGatewayDiscoveryEvent,successEventTarget:this,data:{gatewayId:e}};Pt(t)}}function ye(e){if(e){var t={url:r+c,method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},successEvent:j.virtualGatewaySyncDataEvent,successEventTarget:this,data:{gatewayId:e}};Pt(t)}}function Ee(e){if(!this.gateways){this.gateways={}}var t=e.deviceInfo.mac;this.gateways[t]=this.Device(t);this.gateways[t].fit(e);this.gateways[t].addButton("Discover",{description:"This is the button to trigger gateway discover new devices.",deviceId:this.gateways[t].deviceId},[function(){Nt(me,this)(e.gatewayId)}]);this.trigger(j.virtualGatewayReadyEvent,[t])}function pe(e){Ot("Configure gateway for "+this.name);Nt(be,this)(e);this.trigger(j.gatewayReadyEvent,[e.deviceInfo.mac])}function be(e){if(!this.gateways){this.gateways={}}var t=e.deviceInfo.mac;this.gateways[t]=this.Device(t);this.gateways[t].fit(e);this.gateways[t].addButton("DiscoverAll",{description:"This is the button to trigger gateway discover new devices.",deviceId:this.gateways[t].deviceId,serviceId:"Discovery",header:{toType:"GATEWAY",method:"DISCOVERY",mode:"ACK"},body:{mode:"ON"}},[Nt(n,this)]);this.gateways[t].addButton("DiscoverBluetooth",{description:"This is the button to trigger gateway discover new devices.",deviceId:this.gateways[t].deviceId,serviceId:"Discovery",header:{toType:"GATEWAY",method:"DISCOVERY",mode:"ACK"},body:{protocolType:"bluetooth",mode:"ON"}},[Nt(i,this)]);this.gateways[t].addButton("DiscoverZwave",{description:"This is the button to trigger gateway discover new devices.",deviceId:this.gateways[t].deviceId,serviceId:"Discovery",header:{toType:"GATEWAY",method:"DISCOVERY",mode:"ACK"},body:{protocolType:"Z-Wave",mode:"ON"}},[Nt(r,this)]);if(document.getElementById("gateway-discover-all-btn")){document.getElementById("gateway-discover-all-btn").disabled=false}if(document.getElementById("gateway-discover-bluetooth-btn")){document.getElementById("gateway-discover-bluetooth-btn").disabled=false}if(document.getElementById("gateway-discover-zwave-btn")){document.getElementById("gateway-discover-zwave-btn").disabled=false}function n(){this.gateways[t].do(this.gateways[t].buttons.DiscoverAll.command,this.access_token)}function i(){this.gateways[t].do(this.gateways[t].buttons.DiscoverBluetooth.command,this.access_token)}function r(){this.gateways[t].do(this.gateways[t].buttons.DiscoverZwave.command,this.access_token)}}function Ce(e){if(!e.header.notifyType||"bindDevice"!==e.header.notifyType){return}var t=e.body.deviceId;if(t){Nt(xe,this)(t)}}function we(e){Ot("Fetching rooms for "+this.name);var t=this.access_token;if(!t){if(this.getListeners(j.getRoomErrorEvent)){this.trigger(j.getRoomErrorEvent,new Error(U))}else{console.error(U)}return}var n="Bearer "+t;for(var i in this.homes){var r={url:u+m+this.homes[i].id+y,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:n},specialFlag:this.homes[i].id,successEvent:j.roomFoundEvent,successEventTarget:this};Pt(r)}}function Te(e,t){var n=JSON.parse(e);if(Array.isArray(n)){for(var i in this.homes){if(t===this.homes[i].id){if(this.homes[i].rooms&&Array.isArray(this.homes[i].rooms)){this.homes[i].rooms.concat(n)}else{this.homes[i].rooms=n}for(var r in this.homes[i].rooms){Ot("Mounting room "+n[r].id+" for "+this.name);this.homes[i].rooms[r].inHome=this.homes[i].id}}}}else{this.trigger(j.getRoomErrorEvent,e);return}this.trigger(j.roomReadyEvent)}function Ie(){if(!this.gateways||!Object.keys(this.gateways).length){this.addListeners(j.gatewayReadyEvent,[Qe])}else{Nt(Qe,this)()}}function Qe(){Ot("Fetching devices for "+this.name);var e=this.access_token;if(!e){if(this.getListeners(j.getDeviceErrorEvent)){this.trigger(j.getDeviceErrorEvent,new Error(z))}else{console.error(z)}return}var t="Bearer "+e;var n=u+I+"?";for(var i in this.homes){for(var r in this.homes[i].rooms){var o={url:n+"homeId="+this.homes[i].id+"&"+"roomId="+this.homes[i].rooms[r].id,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:t},specialFlag:this.homes[i].rooms[r].id,successEvent:j.deviceFoundEvent,successEventTarget:this};Pt(o)}}}function Be(e){Ot("Fetching devices for "+this.name);var t=this.access_token;if(!t){if(this.getListeners(j.getDeviceErrorEvent)){this.trigger(j.getDeviceErrorEvent,new Error(z))}else{console.error(z)}return}var n="Bearer "+t;var i=u+I+"?";for(var r in this.homes){var o={url:i+"homeId="+this.homes[r].id,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:n},specialFlag:this.homes[r],successEvent:j.deviceFoundEvent,successEventTarget:this};Pt(o)}}function Oe(e,t){Ot("Adding devices in room "+t+" for "+this.name);var n=[];if(e){n=JSON.parse(e)}if(Array.isArray(n)){for(var i in this.homes){for(var r in this.homes[i].rooms){if(t===this.homes[i].rooms[r].id){if(!this.homes[i].rooms[r].devices||!Array.isArray(this.homes[i].rooms[r].devices)){this.homes[i].rooms[r].devices=[]}if(!this.homes[i].rooms[r].devicesMap){this.homes[i].rooms[r].devicesMap={}}for(var o in n){if(n[o]&&!this.homes[i].rooms[r].devicesMap[n[o].deviceId]){this.homes[i].rooms[r].devicesMap[n[o].deviceId]=n[o];this.homes[i].rooms[r].devices.push(n[o])}}}}}}else{this.trigger(j.getDeviceErrorEvent,k);return}this.trigger(j.deviceAvailableEvent)}function Re(){var e=[];for(var t in this.homes){for(var n in this.homes[t].rooms){Ot("Fetching device details in room "+this.homes[t].rooms[n].id);for(var i in this.homes[t].rooms[n].devices){if(this.homes[t].rooms[n].devices[i]){xe.apply(this,[this.homes[t].rooms[n].devices[i].deviceId])}e.push(this.homes[t].rooms[n].devices[i])}}}this.trigger(j.allDeviceReadyEvent,[e])}function xe(e,t,n){Ot("Fetching "+e+" details");var i=j.deviceReadyEvent;if(t&&n){i=null}var r=this.access_token;if(!r){if(this.getListeners(j.getDeviceDetailsErrorEvent)){this.trigger(j.getDeviceDetailsErrorEvent,new Error(z))}else{console.error(z)}return}var o="Bearer "+r;var s=u+Q+e;var a={url:s,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:o},successEvent:i,successEventTarget:this,successHandler:t,errorHandler:n};Pt(a)}function Se(e,t,n,i){Ot("Deleting "+t+" from home "+e);var r=null;if(n&&i){r=null}var o=this.access_token;if(!o){if(this.getListeners(j.tokenErrorEvent)){this.trigger(j.tokenErrorEvent,new Error(z))}else{console.error(z)}return}var s="Bearer "+o;var a=u+O+e+R+t;var A={url:a,method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:s},successEvent:r,successEventTarget:this,successHandler:n,errorHandler:i};Pt(A)}function Le(e,t,n,i,r){Ot("Fetching device capability");var o=this.access_token;var s="?deviceId=";if(n){s="?gatewayId="}var a="Bearer "+o;var A=u+b;var d=JSON.parse(e);if(!Array.isArray(d)){d=[];d.push({id:e})}for(var c in d){A=A+d[c].id+C;if(!t){t='""'}A=A+s+t;var v={url:A,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:a},successHandler:i,errorHandler:r};Pt(v)}}function Ne(e){Ot("Parsing device capability")}function Pe(){Ot("Need to bind gateway")}function ze(e){var t=JSON.parse(e);if(t.gatewayId&&t.deviceId==t.gatewayId){if(t.deviceInfo.protocolType==="SamsungVirtualGW"){this.trigger(j.virtualGatewayFoundEvent,[t])}else{this.trigger(j.gatewayFoundEvent,[t])}}}function He(e){Ot("Fetching recordings in home "+e);var t=this.access_token;if(!t){if(this.getListeners(j.getRecordingsErrorEvent)){this.trigger(j.getRecordingsErrorEvent,new Error(z))}else{console.error(z)}return}var n="Bearer "+t;var i=u+N+e+P;var r={url:i,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:n},successEvent:j.recordingsFoundEvent,successEventTarget:this};Pt(r)}function Fe(e,t,n){Ot("Downloading recording from "+e);var i=this.access_token;if(!i){if(this.getListeners(j.getRecordingsErrorEvent)){this.trigger(j.getRecordingsErrorEvent,new Error(z))}else{console.error(z)}return}var r="Bearer "+i;var o={url:e,method:"GET",headers:{Authorization:r},successHandler:t,errorHandler:n};Pt(o)}De.prototype=Ct(e);De.prototype.constructor=De;De.prototype.fit=Ue;De.prototype.activate=ke;De.prototype.deactivate=Ge;De.prototype.Button=function(e,t,n){return new Je(e,t,n)};De.prototype.addButton=je;De.prototype.do=qe;function De(e,t){this.name=e;Ot(e+" created");this.on(j.deviceActivatedEvent,Xe);this.on(j.deviceDeactivatedEvent,Ve);this.on(j.deviceCommandSentEvent,Me);return this}function Ue(e){if(null!==e&&typeof e==="string"){this.deviceId=e}else if(null!==e&&(typeof e==="undefined"?"undefined":_typeof(e))==="object"){var t=Object.keys(e);for(var n in t){this[t[n]]=e[t[n]]}}this.activate();return this}function ke(){Ot(this.name+" is about to be activated");this.trigger(j.deviceActivatedEvent,[this.name,this.deviceId])}function Ge(){Ot(this.name+" is about to be deactivated");this.trigger(j.deviceDeactivatedEvent)}function Xe(){Ot(this.name+" is now activated")}function Ve(){Ot(this.name+" is now deactivated")}function We(){return this}function je(e,t,n){var i=this;var r=[function(){i.do(t)},function(){i.do(t)},function(){i.do(t)}];if(!this.buttons){this.buttons={}}if(this.buttons.hasOwnProperty(e)){Bt("Button with name '"+e+"' already exist. Skip creating duplicate button. Nothing fatal");return this}if(n&&Array.isArray(n)&&n.length){r=n}for(var o in r){if(typeof r[o]==="function"){var s=r[o];r[o]=Nt(s,this)}}this.buttons[e]=this.Button(e,t,r);Ot("Button '"+e+"' has been put on "+this.name);return this}function qe(e,t){var n=[];Ot(this.name+" respond to button");if(!e||Array.isArray(e)&&!e.length){Ot(V)}else{if(Array.isArray(e)){n=e}else{n.push(e)}for(var i in n){var r="";var o=this.name+" is sending command to a virtual device";var s=this.name+" is sending specific command to the physical device";if(!t){if(n[i].description){r=n[i].description+" "}if(window&&typeof window.consoleLogAndPrint==="function"){window.consoleLogAndPrint(r+o)}else{Ot(r+o)}return}else{Ot(r+s)}var a={header:n[i].header,body:n[i].body};var A="Bearer "+t;var d=u+x+this.deviceId+S+n[i].serviceId+L;var c={url:d,method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:A},successEvent:j.deviceCommandSentEvent,successEventTarget:this,data:a};Pt(c)}}}function Me(e){Ot(e)}Je.prototype=Ct();Je.prototype.constructor=Je;function Je(e,t,n){this.name=e;this.command=t;var i=n;if(Array.isArray(this.command)&&null===i){i=t}if(!this.actionHandlers||!Array.isArray(this.actionHandlers)){this.actionHandlers=[]}if(Array.isArray(n)){for(var r in n){if(typeof n[r]==="function"){this.actionHandlers.push(n[r])}}if(this.actionHandlers[0]){this.pressAndRelease=Ze}if(this.actionHandlers[1]){this.pressAndHold=Ke}if(this.actionHandlers[2]){this.release=Ye}}Ot("Button '"+e+"' created");return this}function Ze(){Ot("Button '"+this.name+"' pressed");this.actionHandlers[0]()}function Ke(){var e=Lt("setInterval");this.oneKeyRollOverIndicatorTimmer=e(function(e){Ot("Button '"+e.name+"' pressed (On going..)")},1e3,this);this.oneKeyRollOverTimmer=e(function(e){Ot("Button '"+e.name+"' pressed")},500,this);this.actionHandlers[1]()}function Ye(){Lt("clearInterval")(this.oneKeyRollOverIndicatorTimmer);Lt("clearInterval")(this.oneKeyRollOverTimmer);Ot("Button '"+this.name+"' released");this.actionHandlers[2]()}function _e(){Ot("Button '"+this.name+"' command canceled")}function $e(e,t){Ot(this.name+" is trying to connect NA via WebSocket");this.wsConnection=new WebSocket(e);this.HAS_SUBSCRIPTION=false;this.trigger(j.notificationChannelOpening);this.wsConnection.push=ot.bind(this.wsConnection);this.wsConnection.subscribe=tt.bind(this);this.wsConnection.unsubscribe=nt.bind(this);this.wsConnection.shutUp=it.bind(this);this.wsConnection.onopen=function(){tt.bind(this)(t);Rt("WebSocket opened",true);var e=Lt("setInterval");var n=et.bind(this,t);this.wsConnection.hearbeatTimer=e(n,2e4);this.trigger(j.notificationChannelOpened)}.bind(this);this.wsConnection.onerror=function(e){xt("WebSocket Error "+e)}.bind(this);this.wsConnection.onmessage=function(e){var t=JSON.parse(e.data);if(t.header&&t.body){this.trigger(j.notificationArrivedEvent,[t])}}.bind(this);this.wsConnection.onclose=function(){Rt("WebSocket has been closed",true);if(this.HAS_SUBSCRIPTION){nt.bind(this)(t)}var e=Lt("clearInterval");e(this.wsConnection.hearbeatTimer);this.trigger(j.notificationChannelClosed);delete this.wsConnection}.bind(this)}function et(e){var t=JSON.stringify({header:{category:"hb"},body:{username:e.key,nstep:"30"}});if(this.wsConnection){this.wsConnection.push(t)}}function tt(e){Bt("Starting connection to NA via WebSocket with user's "+"username/password. Does not look like a good idea");this.HAS_SUBSCRIPTION=true;var t=JSON.stringify({header:{requestId:"abcdefghijklmnopqrstuvwxyz",category:"register",type:"signaltrans",version:"v2",timestamp:st()},body:{username:e.key,password:e.secret,mqttClientId:this.mqtt_clientid}});this.wsConnection.push(t)}function nt(e){Bt("Unsubscribe from NA push notification with user's "+"username/password. Does not look like a good idea");this.HAS_SUBSCRIPTION=false;var t=JSON.stringify({header:{requestId:"abcdefghijklmnopqrstuvwxyz",category:"unregister",type:"signaltrans",version:"v2",timestamp:st()},body:{username:e.key,password:e.secret,mqttClientId:this.mqtt_clientid}});this.wsConnection.push(t)}function it(e){var t=Lt("clearInterval");t(this.wsConnection.hearbeatTimer);if(e){nt.bind(this)(e)}}function rt(e){if(e.header.requestId&&e.header.timestamp&&e.body.msg&&e.body.code){Rt("Notification subscription status: "+JSON.stringify(e),true);if(e.body.code==="1"){if(this.HAS_SUBSCRIPTION){this.trigger(j.notificationSubscribeSucceedEvent,[e])}else{this.trigger(j.notificationUnsubscribeSucceedEvent,[e])}}else{if(this.HAS_SUBSCRIPTION){this.trigger(j.notificationSubscribeFailedEvent,[e])}else{this.trigger(j.notificationUnsubscribeFailedEvent,[e])}}}else if(e.header.method==="hb"){if(_){Rt("Heart Beat Response: "+JSON.stringify(e),true)}}else if(e.header&&e.body&&e.header.replyToTopic){Rt("Topic --> "+JSON.stringify(e),true);this.trigger(q.replyToTopic,[e])}else if(e.header&&e.body&&e.header.notifyType){Rt(JSON.stringify(e),true);this.trigger(q[e.header.notifyType],[e])}}function ot(e){if(this.readyState&&this.readyState===this.OPEN){this.send(e);if(!_&&JSON.parse(e).header.category==="hb"){return true}console.log("%c     Push     %c "+e,"background: #ff9933; color: #ffffff","background: #ffffff; color: #000000")}else{if(this.readyState===this.CONNECTING){Rt("Push failed. WebSocket has NOT yet been opened",true)}else if(this.readyState===this.CLOSING){Rt("Push failed. WebSocket is closing",true)}else if(this.readyState===this.CLOSED){Rt("Push failed. WebSocket has been closed",true)}return false}return true}function st(){var e=new Date,t=-e.getTimezoneOffset(),n=t>=0?"+":"-",i=function r(e){var t=Math.abs(Math.floor(e));return(t<10?"0":"")+t};return e.getFullYear()+i(e.getMonth()+1)+i(e.getDate())+"T"+i(e.getHours())+i(e.getMinutes())+i(e.getSeconds())+"Z"}function at(){var e=(new Date).getTime();var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(t=="x"?n:n&3|8).toString(16)})}function At(e,t){var n=document.getElementById(e);var i=n.tagName.toUpperCase()==="VIDEO";var r={ws_uri:"wss://"+window.location.hostname+":8403/kurento",camera_uri:"http://admin:huawei@192.168.10.124/videostream.asf?user=admin&pwd=huawei&resolution=64&rate=0",videoWidth:640,videoHeight:480,frameRate:25,audio:false,backgroundImage:"url(data:image/png;base64,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CMML4nUU+qWZ60COUo04FTMdm5IRfiAAoWLDKt9RsIDIAwEIAMB5U20RAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAQgAAACEAAAAQgAgAAEABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAQgAAACEAAAAQgAgAAEABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAQgAAACEAAAAQgAIAABABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAQgAAACEAAAAQgAIAABABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAQgAAACEABAAAIAIAABABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAQgAAACEABAAAIAIAABABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAQgAAACEABAAAIAIAABABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAQgAIAABABAAAIAIAABABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAQgAIAABABAAAIAIAABABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAEIAIAABABAAAIAIAABABCAAAAIQAAABCAAAAIQAAABCACAAAQAQAACACAAAQAQgAAACEAAAAEIAIAABABAAAIAIAABABCAAAAIQAAABCAAAAIQAICy+v8DAJ0Uub6HZBZ4AAAAAElFTkSuQmCC)",
backgroundRepeat:"no-repeat",backgroundSize:"contain"};var o=dt(t,r);if(!e){xt("Ip camera output element must have a parent")}else if(i){xt("Parent of the ip camera output cannot be a 'video' tag")}else{if (document.getElementById(e + '-ip-camera-output')) { n.removeChild( document.getElementById(e + '-ip-camera-output')); } var s=document.createElement("video");var a=e+"-ip-camera-output";s.setAttribute("id",a);s.setAttribute("width",o.videoWidth.toString());s.setAttribute("height",o.videoHeight.toString());s.style.backgroundImage=o.backgroundImage;s.style.backgroundRepeat=o.backgroundRepeat;s.style.backgroundSize=o.backgroundSize;s.autoplay=true;n.appendChild(s);ct(s,o)}}function dt(e,t){for(var n in e){if(t[n]){t[n]=e[n]}}return t}function ct(e,t){e.pipeline=null;e.webRtcPeer=null;e.options=t;e.startTransmit=vt.bind(e,t);e.onSdpOffer=ut.bind(e);e.stopTransmit=ht.bind(e)}function vt(e){var t={audio:e.audio,video:{width:e.videoWidth,height:e.videoHeight,framerate:e.frameRate}};var n={remoteVideo:this,mediaConstrains:t};this.aboutToBeDestroyedCheckListStub=mt(this.stopTransmit)-1;this.webRtcPeer=kurentoUtils.WebRtcPeer.WebRtcPeerRecvonly(n,function(e){if(e){return console.error(e)}this.webRtcPeer.generateOffer(this.onSdpOffer);this.webRtcPeer.peerConnection.addEventListener("iceconnectionstatechange",function(e){if(this.webRtcPeer&&this.webRtcPeer.peerConnection){Ot("oniceconnectionstatechange -> "+this.webRtcPeer.peerConnection.iceConnectionState);Ot("icegatheringstate -> "+this.webRtcPeer.peerConnection.iceGatheringState)}}.bind(this))}.bind(this))}function ut(e,t){var n=function(e){if(e){console.error(e);this.stopTransmit()}}.bind(this);var i=this;if(e)return n.apply(this,e);kurentoClient(i.options.ws_uri,function(e,r){if(e)return n(e);r.create("MediaPipeline",function(e,r){if(e)return n(e);i.pipeline=r;i.pipeline.create("PlayerEndpoint",{uri:i.options.camera_uri},function(e,r){if(e)return n(e);i.pipeline.create("WebRtcEndpoint",function(e,o){if(e)return n(e);ft(o,i.webRtcPeer,n);o.processOffer(t,function(e,t){if(e)return n(e);o.gatherCandidates(n);i.webRtcPeer.processAnswer(t)});r.connect(o,function(e){if(e)return n(e);Ot("PlayerEndpoint-->WebRtcEndpoint connection established");r.play(function(e){if(e)return n(e);Ot("Player playing ...")})})})})})})}function ht(){var e=this.aboutToBeDestroyedCheckListStub;Et(e);if(this.webRtcPeer){this.webRtcPeer.dispose();this.webRtcPeer=null}if(this.pipeline){this.pipeline.release();this.pipeline=null}}function ft(e,t,n){t.on("icecandidate",function(t){Ot("Local icecandidate "+JSON.stringify(t));t=kurentoClient.register.complexTypes.IceCandidate(t);e.addIceCandidate(t,n)});e.on("OnIceCandidate",function(e){var i=e.candidate;Ot("Remote icecandidate "+JSON.stringify(i));t.addIceCandidate(i,n)})}function lt(){return window&&window.self===window}function gt(e){if(lt()){e.parentNode.removeChild(e)}}if(lt()){document.onAboutToBeDestroyedCheckList=[];document.onAboutToBeUnloadedCheckList=[];window.onbeforeunload=function(e){if(Array.isArray(document.onAboutToBeDestroyedCheckList)&&document.onAboutToBeDestroyedCheckList.length||Array.isArray(document.onAboutToBeUnloadedCheckList)&&document.onAboutToBeUnloadedCheckList.length){var t=document.onAboutToBeUnloadedCheckList;for(var n in t){if(typeof t[n]==="function"){t[n]()}}e.returnValue="Are you sure you want to close this window?"}};window.onunload=function(e){var t=document.onAboutToBeDestroyedCheckList;for(var n in t){if(typeof t[n]==="function"){t[n]()}}e.returnValue="Are you sure you want to close this window?"}}function mt(e){var t;if(!window&&window.self!==window){return}t=document.onAboutToBeDestroyedCheckList.push(e);return t}function yt(e){var t;if(!window&&window.self!==window){return}t=document.onAboutToBeUnloadedCheckList.push(e);return t}function Et(e){var t=document.onAboutToBeDestroyedCheckList;var n=t[e];if(n&&Array.isArray(t)){document.onAboutToBeDestroyedCheckList.splice(e,1)}}function pt(e){var t=document.onAboutToBeUnloadedCheckList;var n=t[e];if(n&&Array.isArray(t)){document.onAboutToBeUnloadedCheckList.splice(e,1)}}function bt(){}function Ct(e){return wt(e)?Object.create(e):{}}function wt(e){var t=typeof e==="undefined"?"undefined":_typeof(e);return!!e&&(t=="object"||t=="function")}var Tt={enumerable:false,writable:false,configurable:false,value:null};function It(e,t,n){var i=n||Tt;Object.defineProperty(e,t,i);return e}function Qt(e){var t=Qt.d||(Qt.d=Tt);t.value=e;return t}function Bt(e){console.warn(e+"!")}function Ot(e){if(K){console.info(e+".")}}function Rt(e,t){if(t){if(typeof t==="boolean"){t="background: #6699ff; color: #ffffff"}console.log("%c Notification %c "+e,t,"background: #ffffff; color: #000000")}else{console.log(e)}}function xt(e){if(K){console.error(e+".")}}function St(e){if(window&&window.self===window){window.alert(e+".")}}function Lt(e){var t=function n(){console.warn("'_resolveMethod()' failed.")};if(typeof e==="string"){if(window&&typeof window[e]==="function"){t=window[e]}else if(global&&global[e]==="function"){t=global[e]}}return t}function Nt(e,t){return e.bind(t)}function Pt(e){var t=new XMLHttpRequest;var n=e.method||"GET";var i=e.url||"";var r=e.headers||{};var o=e.errorHandler||function(e){console.error(e)};var s=e.successHandler||function(e){};var a=e.data;if(!i){o("Request must have a destination url");return}t.open(n,i,true);for(var A in r){t.setRequestHeader(A,r[A])}t.onerror=o;t.onreadystatechange=function(){if(t.readyState===4){if(t.status>=200&&t.status<400){s(t.responseText);if(e.successEventTarget&&e.successEvent&&e.specialFlag){e.successEventTarget.trigger(e.successEvent,[t.responseText,e.specialFlag])}else if(e.successEventTarget&&e.successEvent){e.successEventTarget.trigger(e.successEvent,[t.responseText])}}else{o("Response returned with non-OK status. Response text: "+t.responseText)}}};if(a){t.send(JSON.stringify(a))}else{t.send()}}return new $});